{"version":3,"sources":["assets\\script\\util\\util.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["class util{\n    public static readonly instance = new util();\n\n    /** 获取两个数间的随机值(包括min max) */\n    public getRandom(min, max) {\n        if(min == -1 || max == -1) return;\n        return Math.floor(Math.random() * (max - min + 1) + min);\n    }\n\n     /**随机生成数组 */\n     getRandArray(min:number,max:number,length:number):Array<number>{\n        let NumberArray:Array<number> = []\n        for(let i=0;i<length;i++){\n            NumberArray.push(this.getRandom(min,max))\n        }\n        return NumberArray\n    }\n\n    /**\n     * 深拷贝\n    */\n    copyObj = (obj = {}) => {            //变量先置空\n        let newobj = null;  \n\n        //判断是否需要继续进行递归\n        if (typeof (obj) == 'object' && obj !== null) {\n            newobj = obj instanceof Array ? [] : {};                //进行下一层递归克隆\n            for (var i in obj) {\n                newobj[i] = this.copyObj(obj[i])\n            }                //如果不是对象直接赋值\n        } else{\n            newobj = obj\n        };            \n        return newobj;    \n    }\n\n    /**\n     * 随机获取数组中指定数量元素\n     * @param list 提供数据的数组\n     * @param itemNum 获取元素数量(当需要元素不重复时此值大于数组长度会打乱返回整个数组)\n     * @param isRepetition 返回元素是否允许重复\n    */\n    public getRandomListItme(list: Array<any>, itemNum: number, isRepetition: boolean = false) {\n        let copyList = this.copyObj(list);\n        let randomList = [];\n\n        list.splice\n\n        if(isRepetition) {\n            for(let i: number = 0; i < itemNum; i++) {\n                randomList.push(copyList[this.getRandom(0, copyList.length-1)])\n            }\n        } else {\n            let getItem = () => {\n                if(copyList.length == 0) {\n                    return;\n                }\n                let item = copyList.splice(this.getRandom(0, copyList.length-1), 1)[0];\n\n                randomList.push(item);\n                if(--itemNum > 0) {\n                    getItem();\n                }\n            }\n\n            getItem();\n        }\n\n        return randomList;\n    }\n\n    /**\n     * 缓动更新事件\n     * @param time 缓动运动时间\n     * @param updateFunc 每帧调用的事件会传入百分比\n    */\n    tweenUpdate(time: number, updateFunc: Function): cc.Tween {\n        let startObj = {num: 0};\n        let endObj = {num: 100};\n\n        let tween = cc.tween(startObj)\n            .to(time, endObj, {progress: (start: number, end: number, current: number, ratio: number): number => {\n                updateFunc(ratio);\n\n                return 1;\n            }})\n            .start();\n\n        return tween;\n    }\n\n    /**\n     * 网格裁切纹理\n     * @param sf 需要裁切的纹理\n     * @param rowNum 网格行数\n     * @param colNum 网格列数\n     * @param space 格子获取纹理的间隙\n    */\n    gridCutSpriteFrame(sf: cc.SpriteFrame, rowNum: number, colNum: number, space: number = 0) {\n        \n        let sp = sf.getTexture();\n        let picWidth = sp.width/colNum;\n        let picHeight = sp.height/rowNum;\n        let sfList: Array<Array<cc.SpriteFrame>> = [];\n\n        for(let i: number = 0; i < rowNum; i++) {\n            sfList.push([]);\n            for(let j: number = 0; j < colNum; j++) {\n                let cutPic = new cc.SpriteFrame(sp);\n\n                cutPic.setRect(new cc.Rect(j * picWidth + j*space, i*picHeight + i*space, picWidth-space, picHeight-space));\n                sfList[i].push(cutPic);\n            }\n        }\n\n        return sfList;\n    }\n\n    \n    /* 判断一个点是否在目标节点内\n     * @param node 目标节点\n     * @param point 目标点位置(世界坐标)\n    */\n    checkPointExistNode(node: cc.Node, point: cc.Vec2 | cc.Vec3) {\n        let width = node.width;\n        let height = node.height;\n        let nodePos = node.convertToWorldSpaceAR(cc.v2(0, 0)).clone();\n        let topPos = cc.v3(nodePos.x, nodePos.y + height/2);\n        let bottomPos = cc.v3(nodePos.x, nodePos.y - height/2);\n        let leftPos = cc.v3(nodePos.x - width/2, nodePos.y);\n        let rightPos = cc.v3(nodePos.x + width/2, nodePos.y);\n\n        if(point.x >= leftPos.x && point.x <= rightPos.x && point.y >= bottomPos.y && point.y <= topPos.y) {\n            return node;\n        }\n\n        return null;\n    }\n\n}\nexport default util.instance;"]}