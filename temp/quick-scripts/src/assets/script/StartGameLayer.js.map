{"version":3,"sources":["assets\\script\\StartGameLayer.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport DataManager from \"./DataManager\";\r\nimport util from \"./util/util\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class startGameLayer extends cc.Component {\r\n\r\n    @property({type: [cc.AudioClip]})\r\n    audioResList: cc.AudioClip[] = [];\r\n\r\n    @property(cc.Node)\r\n    checkBtn:cc.Node = null\r\n\r\n    @property(cc.Node)\r\n    page:cc.Node = null\r\n\r\n    @property(cc.Node)\r\n    lodingPage:cc.Node = null\r\n\r\n    private isPolicy:boolean = false\r\n\r\n    titleTween: cc.Tween = null;\r\n\r\n    start(): void {\r\n        if(!DataManager.curSoundIsClose) {\r\n            cc.find(\"Canvas\").getComponent(cc.AudioSource).volume = 0;\r\n            this.node.getComponent(cc.AudioSource).volume = 0;\r\n        } else {\r\n            cc.find(\"Canvas\").getComponent(cc.AudioSource).volume = 1;\r\n            this.node.getComponent(cc.AudioSource).volume = 1;\r\n        }\r\n\r\n        this.checkBtn.getChildByName(\"title\").on(cc.Node.EventType.TOUCH_END,()=>{\r\n            this.page.active = true\r\n            this.page.getComponent(cc.Animation).play();\r\n            this.node.getComponent(cc.AudioSource).clip = this.audioResList[0];\r\n            this.node.getComponent(cc.AudioSource).play();\r\n        })\r\n        /**生成用户ID */\r\n        if(DataManager.userId == \"10086\"){\r\n           let newUserId:string = ''\r\n           for(let i=0;i<DataManager.userId.length;i++){\r\n                newUserId += util.getRandom(0,9)\r\n           }\r\n           DataManager.userId = newUserId\r\n        }\r\n\r\n        this.lodingPage.getChildByName('pg').getComponent(cc.ProgressBar).progress = 0\r\n        \r\n    }\r\n    switchScene() {\r\n        if(this.isPolicy){\r\n            this.node.getComponent(cc.AudioSource).clip = this.audioResList[0];\r\n            this.node.getComponent(cc.AudioSource).play();\r\n            this.lodingPage.active = true\r\n            this.startLoding()\r\n        }else{\r\n            this.node.stopAllActions();\r\n            this.titleTween && this.titleTween.stop();\r\n\r\n            let title = this.checkBtn.getChildByName(\"title\");\r\n            title.getComponent(cc.LabelOutline).color = cc.color(0,0,0,255);\r\n            this.titleTween = util.tweenUpdate(0.3, (ratio) => {\r\n                let colroNum = 255 - ratio * 255 * 2;\r\n\r\n                title.getComponent(cc.LabelOutline).color = cc.color(colroNum,colroNum,colroNum,255);\r\n            });\r\n            // cc.tween(this.checkBtn)\r\n            //     .to(0.1,{position:cc.v3(this.checkBtn.position.x,this.checkBtn.position.y + 5,1)})\r\n            //     .to(0.1,{position:cc.v3(this.checkBtn.position.x,this.checkBtn.position.y - 5,1)})\r\n            //     .start()\r\n        }\r\n       \r\n    }\r\n    /**开启加载页面 */\r\n    startLoding(){\r\n        let pg = this.lodingPage.getChildByName(\"pg\")\r\n        let speed = 0.02\r\n        this.schedule(()=>{\r\n            pg.getComponent(cc.ProgressBar).progress += speed\r\n            if(pg.getComponent(cc.ProgressBar).progress >= 1){\r\n                pg.getComponent(cc.ProgressBar).progress = 1;\r\n                this.unscheduleAllCallbacks()\r\n                cc.director.loadScene(\"hall\");\r\n            }\r\n        },speed)\r\n    }\r\n    onChange(){\r\n        let border = this.checkBtn.getChildByName(\"border\")\r\n            border.children[0].active = !border.children[0].active \r\n            this.isPolicy = !this.isPolicy\r\n            this.node.getComponent(cc.AudioSource).clip = this.audioResList[0];\r\n            this.node.getComponent(cc.AudioSource).play();\r\n    }\r\n\r\n    closePage(){\r\n        this.page.active = false\r\n        this.node.getComponent(cc.AudioSource).clip = this.audioResList[0];\r\n        this.node.getComponent(cc.AudioSource).play();\r\n    }\r\n\r\n    protected onDestroy(): void {\r\n        this.checkBtn.getChildByName(\"title\").off(cc.Node.EventType.TOUCH_END)\r\n        this.checkBtn.getChildByName(\"border\").off(cc.Node.EventType.TOUCH_END)\r\n        \r\n    }\r\n    \r\n\r\n    \r\n}\r\n"]}