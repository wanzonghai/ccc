{"version":3,"sources":["file:///E:/Cocos/Project/ROYALTEENPATTI/assets/scripts/tools/NativeJSBridgeIns.ts"],"names":["_decorator","error","EveMgr","EEventRult","ELoginType","Appic","ccclass","property","NativeJSBridgeIns","getInatance","_instance","activeStatue","_appActiveStatue","event","emit","appActiveStatue","googleLoginRes","_strName","_strEmail","_strIdToken","gameMg","loginInfo","user","name","loginData","id_token","email","Google","facebookLoginRes","Facabook","shareSuccess","console","log","onBackPressed","backPressed","CallBackKey","_callBackPrefix","_prevErr","_hasInited","window"],"mappings":"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","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport { _decorator, error } from 'cc';\nimport { EveMgr } from '../manages/EveMgr';\nimport { EEventRult, ELoginType } from './enumes';\nimport Appic from './Appic';\nimport { ILoginData, ILoginInfo } from './interface';\n\nconst { ccclass, property } = _decorator;\n\n@ccclass\nclass NativeJSBridgeIns {\n    private static _instance: NativeJSBridgeIns = null;\n    /////facebook\n    private static CallBackKey: string = 'nativeCallback';\n    private static _callBackPrefix: string; //回调集合字符前缀\n\n    private static _prevErr = '';\n    private static _hasInited = false;\n\n    private static appActiveStatue: boolean = false;\n\n    public static getInatance() {\n        if (this._instance == null) this._instance = new NativeJSBridgeIns();\n        return this._instance;\n    }\n    public activeStatue(_appActiveStatue) {\n        error('TS Callback:' + _appActiveStatue);\n        EveMgr.event.emit(EEventRult.appActiveStatue, _appActiveStatue);\n    }\n    public googleLoginRes(_strName: string, _strEmail, _strIdToken: string) {\n        //lang?: string;\n        error('TS Callback:' + _strName + _strEmail + _strIdToken);\n        Appic.gameMg.loginInfo.user.name = _strIdToken;\n        Appic.gameMg.loginInfo.user.loginData.id_token = _strIdToken;\n        Appic.gameMg.loginInfo.user.loginData.email = _strEmail || '';\n\n        EveMgr.event.emit(ELoginType.Google);\n    }\n    public facebookLoginRes(_strName: string, _strEmail, _strIdToken: string) {\n        error('TS Callback:' + _strName + _strEmail + _strIdToken);\n        EveMgr.event.emit(ELoginType.Facabook);\n    }\n    // /**设备品牌 设备imei1  设备序列号 设备系统*/\n    // public getDeviceAllInfo(brand: string, imei: string, serial_number: string, system: string) {\n    //     error('TS Callback:' + brand + imei + serial_number + system);\n    //     Appic.SysMg.deviceInfo.brand = brand;\n    //     Appic.SysMg.deviceInfo.imei1 = imei;\n    //     Appic.SysMg.deviceInfo.serial_number = serial_number;\n    //     Appic.SysMg.deviceInfo.system = system;\n    //     Appic.MsgTipMg.show(Appic.SysMg.deviceInfo.imei1);\n    //     EveMgr.event.emit(EventManager.deviceInfo);\n    // }\n\n    /**跳转第三方平台成功 */\n    public shareSuccess() {\n        console.log('跳转第三方平台成功');\n        // Appic.PlayerMg.adShowEscalationEvent(4).then(() => {\n        //     if (App.SysMg.inviteTypeShow == 2) {\n        //         EventManager.event.emit(EventManager.shareSuccess);\n        //     }\n        // });\n        EveMgr.event.emit(EEventRult.shareSuccess);\n    }\n    /**安卓返回按钮 */\n    public onBackPressed() {\n        console.log('按键返回');\n        EveMgr.event.emit(EEventRult.backPressed);\n    }\n\n    // public getPhoneInfo(androidId, lang) {\n    //     error('TS Callback:' + androidId + lang);\n    //     console.log('手机数据' + androidId + '::' + lang);\n    //     App.SysMg.PhoneInfo.andirodId = androidId;\n    //     App.SysMg.PhoneInfo.lang = lang;\n    // }\n\n    //facabook;\n    // public static init() {\n    //     if (sys.isBrowser) {\n    //         return;\n    //     }\n    //     if (this._hasInited) {\n    //         return;\n    //     }\n    //     this._hasInited = true;\n    //     window[this.CallBackKey] = {}; //回调函数集合\n    //     this._callBackPrefix = 'window.' + this.CallBackKey + '.';\n    //     //捕获异常\n    //     if (cc.sys.isNative) {\n    //         window['__errorHandler'] = function (file: any, line: any, error: any, stack: any) {\n    //             if (this._prevErr != error + line) {\n    //                 stack = String(stack);\n    //                 console.log('========== GOT JS/TS ERROR ==========');\n    //                 console.log('file:' + file, 'line:' + line, 'error:' + error);\n    //                 console.log(stack);\n    //                 this._prevErr = error + line;\n    //             }\n    //         };\n    //     }\n    // }\n    // 登陆fb   Native.loginFacebook((ret:any)=>{cc.log(ret)},\"(%s)\")\n}\n//第一种方法 window.NativeJSBridgeIns.googleLoginRes\nwindow['NativeJSBridgeIns'] = NativeJSBridgeIns.getInatance();\n//第二种方法\n// window.callAndroid = CallAndroid.getInatance();\n// declare interface Window{\n//     callAndroid:CallAndroid;\n// }\n"]}