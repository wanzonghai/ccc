{"version":3,"sources":["file:///E:/Cocos/Project/ROYALTEENPATTI/assets/scripts/module/HallScene.ts"],"names":["Button","Component","Label","ResolutionPolicy","Sprite","_decorator","find","view","director","log","Appic","Until","RecycleScroll","ScrollItem","ccclass","property","HallScene","layer_mid","sprite_avatar","label_userName","label_userCoin","btn_recharge","btn_service","btn_set","btn_checkIn","btn_eMail","btn_share","itemScroll","userInfo","setFrameFit","designResolution","getDesignResolutionSize","visibleSize","getVisibleSize","width","height","setDesignResolutionSize","FIXED_WIDTH","FIXED_HEIGHT","onLoad","initView","getComponent","getChildByName","onItemRender","bind","onItemClicked","onEnable","initEvent","gameMg","loginInfo","user","updateUserCoin","updateView","onDisable","removeEvent","start","numItems","loadRes","preloadScene","console","index","node","setData","on","onClickHandel","off","update","deltaTime","string","climeUserName","name","formatNumber3","score","toString","lateUpdate","evet","targetName","target","_rechargeHandel","_serviceHandel","_setHandel","_checkInHandel","_eMailHandel","_shareHandel","loadScene","androidShare","onDestroy"],"mappings":"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","sourcesContent":["import { Node, Button, Component, Label, ResolutionPolicy, Sprite, _decorator, find, view, Event, director, log } from 'cc';\r\nimport Appic from '../tools/Appic';\r\nimport { Until } from '../tools/Until';\r\nimport { IPlayerInfo } from '../tools/interface';\r\nimport RecycleScroll from '../commons/uiComponent/RecycleScroll';\r\nimport { ScrollItem } from './Hall/ScrollItem';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('HallScene')\r\nexport default class HallScene extends Component {\r\n    protected layer_mid: Node = null;\r\n    //**********m_avatar\r\n    protected sprite_avatar: Sprite = null;\r\n    protected label_userName: Label = null;\r\n    protected label_userCoin: Label = null;\r\n    protected btn_recharge: Button = null;\r\n\r\n    //***************button\r\n    protected btn_service: Button = null;\r\n    protected btn_set: Button = null;\r\n    protected btn_checkIn: Button = null;\r\n    protected btn_eMail: Button = null;\r\n    protected btn_share: Button = null;\r\n\r\n    protected itemScroll: RecycleScroll = null;\r\n\r\n    private userInfo: IPlayerInfo = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    private setFrameFit(): void {\r\n        const designResolution = view.getDesignResolutionSize();\r\n        const visibleSize = view.getVisibleSize(); // 屏幕可见区域\r\n        // 场景适配\r\n        if (visibleSize.width / visibleSize.height < designResolution.width / designResolution.height) {\r\n            view.setDesignResolutionSize(designResolution.width, designResolution.height, ResolutionPolicy.FIXED_WIDTH);\r\n        } else {\r\n            view.setDesignResolutionSize(designResolution.width, designResolution.height, ResolutionPolicy.FIXED_HEIGHT);\r\n        }\r\n    }\r\n    protected onLoad(): void {\r\n        this.setFrameFit();\r\n        this.initView();\r\n    }\r\n    private initView() {\r\n        //**********m_avatar\r\n        this.layer_mid = find('Canvas/layer_mid');\r\n        this.sprite_avatar = find('m_avatar/bg/Mask/sprite_avatar', this.layer_mid)?.getComponent(Sprite);\r\n        this.label_userName = this.layer_mid.getChildByName('label_userName')?.getComponent(Label);\r\n        this.label_userCoin = this.layer_mid.getChildByName('label_userCoin')?.getComponent(Label);\r\n        this.btn_recharge = find('m_avatar/bg/btn_recharge', this.layer_mid)?.getComponent(Button);\r\n        //**********button\r\n        this.btn_service = this.layer_mid.getChildByName('btn_service')?.getComponent(Button);\r\n        this.btn_set = this.layer_mid.getChildByName('btn_set')?.getComponent(Button);\r\n        this.btn_checkIn = this.layer_mid.getChildByName('btn_checkIn')?.getComponent(Button);\r\n        this.btn_eMail = this.layer_mid.getChildByName('btn_eMail')?.getComponent(Button);\r\n        this.btn_share = this.layer_mid.getChildByName('btn_share')?.getComponent(Button);\r\n\r\n        this.itemScroll = this.layer_mid.getChildByName('ScrollView')?.getComponent(RecycleScroll);\r\n        this.itemScroll.onItemRender = this.onItemRender.bind(this);\r\n        this.itemScroll.onItemClicked = this.onItemClicked.bind(this);\r\n    }\r\n    protected onEnable() {\r\n        this.initEvent();\r\n        this.userInfo = Appic.gameMg.loginInfo.user;\r\n        this.updateUserCoin();\r\n        this.updateView();\r\n    }\r\n    protected onDisable() {\r\n        this.removeEvent();\r\n    }\r\n    protected start() {\r\n        this.itemScroll.numItems = 6;\r\n        this.loadRes();\r\n    }\r\n    async loadRes() {\r\n        director.preloadScene('Login', () => {\r\n            console.log('Login scene preloaded');\r\n        });\r\n    }\r\n    onItemRender(index: number, node: Node) {\r\n        node.getComponent(ScrollItem).setData(index);\r\n    }\r\n    onItemClicked(index: number, node: Node) {\r\n        log(`click: ${index}`);\r\n    }\r\n    private initEvent() {\r\n        this.btn_recharge && this.btn_recharge.node.on('click', this.onClickHandel, this);\r\n        this.btn_service && this.btn_service.node.on('click', this.onClickHandel, this);\r\n        this.btn_set && this.btn_set.node.on('click', this.onClickHandel, this);\r\n        this.btn_checkIn && this.btn_checkIn.node.on('click', this.onClickHandel, this);\r\n        this.btn_eMail && this.btn_eMail.node.on('click', this.onClickHandel, this);\r\n        this.btn_share && this.btn_share.node.on('click', this.onClickHandel, this);\r\n    }\r\n    private removeEvent() {\r\n        this.btn_recharge && this.btn_recharge.node.off('click', this.onClickHandel, this);\r\n        this.btn_service && this.btn_service.node.off('click', this.onClickHandel, this);\r\n        this.btn_set && this.btn_set.node.off('click', this.onClickHandel, this);\r\n        this.btn_checkIn && this.btn_checkIn.node.off('click', this.onClickHandel, this);\r\n        this.btn_eMail && this.btn_eMail.node.off('click', this.onClickHandel, this);\r\n        this.btn_share && this.btn_share.node.off('click', this.onClickHandel, this);\r\n    }\r\n\r\n    update(deltaTime: number) {}\r\n\r\n    private updateView() {\r\n        this.label_userName.string = Until.climeUserName(this.userInfo.name, 8);\r\n    }\r\n    private updateUserCoin() {\r\n        this.label_userCoin.string = Until.formatNumber3(this.userInfo.score.toString());\r\n    }\r\n    protected lateUpdate() {}\r\n    private onClickHandel(evet: Event) {\r\n        let targetName: string = evet.target.name;\r\n        switch (targetName) {\r\n            case 'btn_recharge':\r\n                this._rechargeHandel();\r\n                break;\r\n            case 'btn_service':\r\n                this._serviceHandel();\r\n                break;\r\n            case 'btn_set':\r\n                this._setHandel();\r\n                break;\r\n            case 'btn_checkIn':\r\n                this._checkInHandel();\r\n                break;\r\n            case 'btn_eMail':\r\n                this._eMailHandel();\r\n                break;\r\n            case 'btn_share':\r\n                this._shareHandel();\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    /** recharge*/\r\n    private _rechargeHandel() {\r\n        console.log('recharge');\r\n    }\r\n    /** service*/\r\n    private _serviceHandel() {\r\n        console.log('service');\r\n    }\r\n    /** set*/\r\n    private _setHandel() {\r\n        console.log('set');\r\n        director.loadScene('Login');\r\n    }\r\n    /** checkIn*/\r\n    private _checkInHandel() {\r\n        console.log('checkIn');\r\n    }\r\n    /** eMail*/\r\n    private _eMailHandel() {\r\n        console.log('eMail');\r\n    }\r\n    /** share*/\r\n    private _shareHandel() {\r\n        console.log('share');\r\n        Appic.gameMg.androidShare();\r\n    }\r\n\r\n    protected onDestroy() {}\r\n}\r\n"]}