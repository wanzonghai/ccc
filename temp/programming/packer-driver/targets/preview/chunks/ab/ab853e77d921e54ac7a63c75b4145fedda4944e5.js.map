{"version":3,"sources":["file:///E:/Cocos/Project/ROYALTEENPATTI/assets/scripts/module/HallScene.ts"],"names":["Button","Component","Label","ResolutionPolicy","Sprite","_decorator","find","view","director","log","ScrollView","instantiate","Prefab","Appic","Until","ScrollItem","ccclass","property","HallScene","layer_mid","sprite_avatar","label_userName","label_userCoin","btn_recharge","btn_service","btn_set","btn_checkIn","btn_eMail","btn_share","itemScroll","userInfo","setFrameFit","designResolution","getDesignResolutionSize","visibleSize","getVisibleSize","width","height","setDesignResolutionSize","FIXED_WIDTH","FIXED_HEIGHT","onLoad","initView","getComponent","getChildByName","onEnable","initEvent","gameMg","loginInfo","user","updateUserCoin","updateView","onDisable","removeEvent","start","loadRes","preloadScene","console","DAM","load","node","resPre","itemPassPre","index","itemPaa","content","addChild","onItemRender","setData","onItemClicked","on","onClickHandel","off","update","deltaTime","string","climeUserName","name","formatNumber3","score","toString","lateUpdate","evet","targetName","target","_rechargeHandel","_serviceHandel","_setHandel","_checkInHandel","_eMailHandel","_shareHandel","loadScene","androidShare","onDestroy"],"mappings":"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","sourcesContent":["import { Node, Button, Component, Label, ResolutionPolicy, Sprite, _decorator, find, view, Event, director, log, ScrollView, instantiate, Prefab } from 'cc';\r\nimport Appic from '../tools/Appic';\r\nimport { Until } from '../tools/Until';\r\nimport { IPlayerInfo } from '../tools/interface';\r\nimport RecycleScroll from '../commons/uiComponent/RecycleScroll';\r\nimport { ScrollItem } from './Hall/ScrollItem';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('HallScene')\r\nexport default class HallScene extends Component {\r\n    protected layer_mid: Node = null;\r\n    //**********m_avatar\r\n    protected sprite_avatar: Sprite = null;\r\n    protected label_userName: Label = null;\r\n    protected label_userCoin: Label = null;\r\n    protected btn_recharge: Button = null;\r\n\r\n    //***************button\r\n    protected btn_service: Button = null;\r\n    protected btn_set: Button = null;\r\n    protected btn_checkIn: Button = null;\r\n    protected btn_eMail: Button = null;\r\n    protected btn_share: Button = null;\r\n\r\n    protected itemScroll: ScrollView = null;\r\n\r\n    private userInfo: IPlayerInfo = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    private setFrameFit(): void {\r\n        const designResolution = view.getDesignResolutionSize();\r\n        const visibleSize = view.getVisibleSize(); // 屏幕可见区域\r\n        // 场景适配\r\n        if (visibleSize.width / visibleSize.height < designResolution.width / designResolution.height) {\r\n            view.setDesignResolutionSize(designResolution.width, designResolution.height, ResolutionPolicy.FIXED_WIDTH);\r\n        } else {\r\n            view.setDesignResolutionSize(designResolution.width, designResolution.height, ResolutionPolicy.FIXED_HEIGHT);\r\n        }\r\n    }\r\n    protected onLoad(): void {\r\n        this.setFrameFit();\r\n        this.initView();\r\n    }\r\n    private initView() {\r\n        //**********m_avatar\r\n        this.layer_mid = find('Canvas/layer_mid');\r\n        this.sprite_avatar = find('m_avatar/bg/Mask/sprite_avatar', this.layer_mid)?.getComponent(Sprite);\r\n        this.label_userName = this.layer_mid.getChildByName('label_userName')?.getComponent(Label);\r\n        this.label_userCoin = this.layer_mid.getChildByName('label_userCoin')?.getComponent(Label);\r\n        this.btn_recharge = find('m_avatar/bg/btn_recharge', this.layer_mid)?.getComponent(Button);\r\n        //**********button\r\n        this.btn_service = this.layer_mid.getChildByName('btn_service')?.getComponent(Button);\r\n        this.btn_set = this.layer_mid.getChildByName('btn_set')?.getComponent(Button);\r\n        this.btn_checkIn = this.layer_mid.getChildByName('btn_checkIn')?.getComponent(Button);\r\n        this.btn_eMail = this.layer_mid.getChildByName('btn_eMail')?.getComponent(Button);\r\n        this.btn_share = this.layer_mid.getChildByName('btn_share')?.getComponent(Button);\r\n\r\n        this.itemScroll = this.layer_mid.getChildByName('ScrollView')?.getComponent(ScrollView);\r\n    }\r\n    protected onEnable() {\r\n        this.initEvent();\r\n        this.userInfo = Appic.gameMg.loginInfo.user;\r\n        this.updateUserCoin();\r\n        this.updateView();\r\n    }\r\n    protected onDisable() {\r\n        this.removeEvent();\r\n    }\r\n    protected start() {\r\n        this.loadRes();\r\n    }\r\n    async loadRes() {\r\n        director.preloadScene('Login', () => {\r\n            console.log('Login scene preloaded');\r\n        });\r\n        Appic.DAM.load(this.node, 'prefab/hall/ItemPass', Prefab, (resPre: Prefab) => {\r\n            let itemPassPre: Prefab = resPre;\r\n            for (let index = 0; index < 6; index++) {\r\n                let itemPaa: Node = instantiate(itemPassPre);\r\n                this.itemScroll.content.addChild(itemPaa);\r\n            }\r\n        });\r\n    }\r\n    onItemRender(index: number, node: Node) {\r\n        node.getComponent(ScrollItem).setData(index);\r\n    }\r\n    onItemClicked(index: number, node: Node) {\r\n        log(`click: ${index}`);\r\n    }\r\n    private initEvent() {\r\n        this.btn_recharge && this.btn_recharge.node.on('click', this.onClickHandel, this);\r\n        this.btn_service && this.btn_service.node.on('click', this.onClickHandel, this);\r\n        this.btn_set && this.btn_set.node.on('click', this.onClickHandel, this);\r\n        this.btn_checkIn && this.btn_checkIn.node.on('click', this.onClickHandel, this);\r\n        this.btn_eMail && this.btn_eMail.node.on('click', this.onClickHandel, this);\r\n        this.btn_share && this.btn_share.node.on('click', this.onClickHandel, this);\r\n    }\r\n    private removeEvent() {\r\n        this.btn_recharge && this.btn_recharge.node.off('click', this.onClickHandel, this);\r\n        this.btn_service && this.btn_service.node.off('click', this.onClickHandel, this);\r\n        this.btn_set && this.btn_set.node.off('click', this.onClickHandel, this);\r\n        this.btn_checkIn && this.btn_checkIn.node.off('click', this.onClickHandel, this);\r\n        this.btn_eMail && this.btn_eMail.node.off('click', this.onClickHandel, this);\r\n        this.btn_share && this.btn_share.node.off('click', this.onClickHandel, this);\r\n    }\r\n\r\n    update(deltaTime: number) {}\r\n\r\n    private updateView() {\r\n        this.label_userName.string = Until.climeUserName(this.userInfo.name, 8);\r\n    }\r\n    private updateUserCoin() {\r\n        this.label_userCoin.string = Until.formatNumber3(this.userInfo.score.toString());\r\n    }\r\n    protected lateUpdate() {}\r\n    private onClickHandel(evet: Event) {\r\n        let targetName: string = evet.target.name;\r\n        switch (targetName) {\r\n            case 'btn_recharge':\r\n                this._rechargeHandel();\r\n                break;\r\n            case 'btn_service':\r\n                this._serviceHandel();\r\n                break;\r\n            case 'btn_set':\r\n                this._setHandel();\r\n                break;\r\n            case 'btn_checkIn':\r\n                this._checkInHandel();\r\n                break;\r\n            case 'btn_eMail':\r\n                this._eMailHandel();\r\n                break;\r\n            case 'btn_share':\r\n                this._shareHandel();\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    /** recharge*/\r\n    private _rechargeHandel() {\r\n        console.log('recharge');\r\n    }\r\n    /** service*/\r\n    private _serviceHandel() {\r\n        console.log('service');\r\n    }\r\n    /** set*/\r\n    private _setHandel() {\r\n        console.log('set');\r\n        director.loadScene('Login');\r\n    }\r\n    /** checkIn*/\r\n    private _checkInHandel() {\r\n        console.log('checkIn');\r\n    }\r\n    /** eMail*/\r\n    private _eMailHandel() {\r\n        console.log('eMail');\r\n    }\r\n    /** share*/\r\n    private _shareHandel() {\r\n        console.log('share');\r\n        Appic.gameMg.androidShare();\r\n    }\r\n\r\n    protected onDestroy() {}\r\n}\r\n"]}